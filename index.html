<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Primary Meta Tags -->
  <title>TOFFEE LIVE TV — Watch Live Streaming Channels</title>
  <meta name="title" content="TOFFEE LIVE TV — Watch Live Streaming Channels">
  <meta name="description" content="Stream your favorite live TV channels instantly with TOFFEE. Watch a wide range of entertainment, news, sports, and more online.">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://toffeelive.com/">
  <meta property="og:title" content="TOFFEE LIVE TV — Watch Live Streaming Channels">
  <meta property="og:description" content="Stream your favorite live TV channels instantly with TOFFEE. Watch a wide range of entertainment, news, sports, and more online.">
  <meta property="og:image" content="https://toffeelive.com/logo-og.png">
  
  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://toffeelive.com/">
  <meta property="twitter:title" content="TOFFEE LIVE TV — Watch Live Streaming Channels">
  <meta property="twitter:description" content="Stream your favorite live TV channels instantly with TOFFEE. Watch a wide range of entertainment, news, sports, and more online.">
  <meta property="twitter:image" content="https://toffeelive.com/logo-og.png">
  
  <!-- Favicon and App Icons -->
  <link rel="icon" type="image/x-icon" href="https://play-lh.googleusercontent.com/6f-KNzrLd72Upq7sqhcMtZS-vCyb-21-J1Pr1kLHXbxr_dePs2O7vP7hAgMk8dxRw=w240-h480-rw">
  <link rel="apple-touch-icon" href="https://toffeelive.com/apple-touch-icon.png">
  <link rel="manifest" href="/manifest.json">
  
  <!-- Canonical Link -->
  <link rel="canonical" href="https://toffeelive.com/">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Fredoka+One&display=swap" rel="stylesheet">
  
  <!-- Video.js CSS -->
  <link href="https://vjs.zencdn.net/7.11.4/video-js.css" rel="stylesheet" />
  
  <!-- Preconnect to external resources -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://vjs.zencdn.net">
  
  <!-- App and Browser Configuration -->
  <meta name="application-name" content="TOFFEE LIVE TV">
  <meta name="theme-color" content="#1a0920">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  <!-- Robots and Crawling -->
  <meta name="robots" content="index, follow">
  
  <style>
    /* [Previous CSS remains the same] */
    /* Additional responsive adjustments */
    @media screen and (max-width: 768px) {
      .channel {
        width: 45%;
      }
      
      .section-title {
        font-size: 1.5rem;
      }
    }
    
    @media screen and (max-width: 480px) {
      .channel {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="logo">
      <img src="https://toffeelive.com/logo.svg" alt="Toffee Logo" class="logo-image">
    </div>
  </header>

  <!-- Responsive Video Player -->
  <div class="video-container">
    <video id="videoPlayer" class="video-js vjs-default-skin" controls preload="auto" aria-label="Live TV Player"></video>
  </div>

  <!-- Main Content -->
  <main class="content">
    <h1 class="section-title">TOFFEE CHANNELS</h1>
    <div class="channels-grid" id="channelsGrid" aria-live="polite"></div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div style="text-align: center;">
      <img src="https://toffeelive.com/logo.svg" alt="Toffee Logo" width="120">
      <p>Copyright &copy; 2024 TOFFEE. All rights reserved.<br>Powered by Live Stream<br>Developed by Likhon Sheikh</p>
    </div>
  </footer>

  <!-- Include Video.js JavaScript -->
  <script src="https://vjs.zencdn.net/7.11.4/video.min.js"></script>
  <script>
    // Initialize the Video.js player with additional options
    const player = videojs('videoPlayer', {
      controlBar: {
        children: [
          'playToggle',
          'volumePanel',
          'progressControl',
          'fullscreenToggle'
        ]
      },
      responsive: true,
      fluid: true
    });

    // Load channels from tv.json with error handling and accessibility
    fetch('tv.json')
      .then(response => {
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        return response.json();
      })
      .then(data => {
        const channelsGrid = document.getElementById('channelsGrid');

        data.channels.forEach(channel => {
          channel.items.forEach(item => {
            const channelDiv = document.createElement('div');
            channelDiv.className = 'channel';
            channelDiv.setAttribute('data-url', item.url);
            channelDiv.setAttribute('role', 'button');
            channelDiv.setAttribute('tabindex', '0');
            channelDiv.setAttribute('aria-label', `Watch ${item.name}`);

            const channelImg = document.createElement('img');
            channelImg.src = item.logo;
            channelImg.alt = item.name;
            channelImg.loading = 'lazy';

            channelDiv.appendChild(channelImg);

            // Add click and keyboard event for accessibility
            channelDiv.addEventListener('click', () => playChannel(item));
            channelDiv.addEventListener('keydown', (e) => {
              if (e.key === 'Enter' || e.key === ' ') {
                playChannel(item);
              }
            });

            channelsGrid.appendChild(channelDiv);
          });
        });
      })
      .catch(error => {
        console.error('Error loading tv.json:', error);
        const channelsGrid = document.getElementById('channelsGrid');
        const errorMsg = document.createElement('p');
        errorMsg.textContent = 'Unable to load channels. Please try again later.';
        errorMsg.style.color = 'red';
        channelsGrid.appendChild(errorMsg);
      });

    // Separate function for playing a channel for reusability
    function playChannel(item) {
      player.src({
        src: item.url,
        type: 'application/x-mpegURL'
      });
      player.play();
      
      // Optional: Scroll to video player
      document.getElementById('videoPlayer').scrollIntoView({ behavior: 'smooth' });
    }
  </script>

  <!-- Additional Performance Optimization -->
  <script>
    // Defer non-critical resources
    window.addEventListener('load', () => {
      // You can add additional non-critical loading here
    });
  </script>
</body>
</html>
